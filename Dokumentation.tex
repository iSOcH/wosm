\documentclass[11pt,a4paper,parskip=half]{scrartcl}
\usepackage{ngerman}
\usepackage[utf8]{inputenc}
\usepackage[colorlinks=false,pdfborder={0 0 0}]{hyperref}
\usepackage{graphicx}
\usepackage{caption}
\usepackage{longtable}
\usepackage{float}
\usepackage{textcomp}
\usepackage{geometry}
\usepackage{amsmath}
\usepackage{amssymb}
\geometry{a4paper, left=30mm, right=25mm, top=30mm, bottom=35mm} 
\usepackage{listings}
\lstset{breaklines=true, breakatwhitespace=true, basicstyle=\scriptsize, numbers=left}
\title{Workshop System Management}
\author{Tobias Lerch, Yanick Eberle, Pascal Schwarz}
\begin{document}
\maketitle
\newpage

\section{Netzwerk}
\subsection{Netzwerkdiagramm}
\subsection{IP Dual-Stack Konzept}
\subsubsection{IPv4}
Wir unterscheiden zwischen drei verschiedenen Netzwerke. Das interne Netzwerk, das DMZ Netzwerk und das öffentliche Netzwerk. Wir verwenden für die DMZ und das interne Netzwerk verschiedene Netzwerkklassen um die Netze schnell unterscheiden zu können. Folgende IP-Adressierung und Maskierung werden wir verwenden.

\textbf{Internes Netzwerk}\\
!!!!Create Latex Table!!!!\\
VLAN 10 Server: 10.0.10.0 255.255.255.0 Gateway 10.0.10.1\\
VLAN 20 Administratoren: 10.0.20.0 255.255.255.0 Gateway 10.0.20.1\\
VLAN 30 Entwicklung: 10.0.30.0 255.255.255.0 Gatetway 10.0.30.1\\
VLAN 40 Verkauf: 10.0.40.0 255.255.255.0 Gatetway 10.0.40.1\\
VPN Clients: 10.0.99.0 255.255.255.0\\
Infrastructure LAN: 10.100.0.0 255.255.255.252

\textbf{DMZ}\\
DMZ LAN: 172.16.0.0 255.255.255.0 Gateway 172.16.0.1

\textbf{Internet}\\
WAN: 209.165.50.0 255.255.255.0 Gateway 209.165.50.1

\subsubsection{IPv6}
Da die Hosts über das Internet direkt erreichbar sein sollen, werden wir globale IPv6 Adressen mit dem Site Prefix /64 verwenden

\textbf{Internes Netzwerk}\\
!!!!Create Latex Table!!!!\\
VLAN 10 Server: 2005:2013:FF:A10::/64 Gateway2005:2013:FF:A10::1\\
VLAN 20 Administratoren: 2005:2013:FF:A20::/64 Gateway 2005:2013:FF:A20::1\\
VLAN 30 Entwicklung: 2005:2013:FF:A30::/64 Gateway 2005:2013:FF:A30::1\\
VLAN 40 Verkauf: 2005:2013:FF:A40::/64 Gateway 2005:2013:FF:A40::1\\
Infrastructure LAN: 2005:2013:FF:A0::/64

\textbf{DMZ}\\
!!!!Create Latex Table!!!!\\
DMZ LAN: 2005:2013:FF:B0::/64 Gateway 2005:2013:FF:B0::1/64

\textbf{Internet}\\
!!!!Create Latex Table!!!!\\
WAN: 2005:209:165:50::/64 Gateway 2005:209:165:50::1/64

\subsection{Routing}
\subsubsection{Core Router}
Der Core Router hat nur default-routen konfiguriert. Sämtlicher Datenverkehr wird an die Firewall gesendet.\\
!!!!Create Latex Table!!!!\\
IPv4: 0.0.0.0 0.0.0.0 next Hop 10.100.0.2\\
IPv6: ::/0 next Hop 2005:2013:FF:A0::2

\subsubsection{Firewall}
Die default Route auf der Firewall würde normalerweise auf den Router des Service Providers weitergeleitet. Da wir in der Simulation aber keinen solchen haben, werden keine default Routen konfiguriert. Die Firewall sendet somit nur den Verkehr für das interne Netzwerk an den Core Router.\\
!!!!Create Latex Table!!!!\\
IPv4: 10.0.0.0 255.255.0.0 next Hop 10.100.0.1 (Die einzelnen VLANs wurden hier zu einem /16 Netz zusammengefasst)\\
IPv6: 2005:2013:FF:A10::/64 next Hop 2005:2013:FF:A0::1\\
2005:2013:FF:A20::/64 next Hop 2005:2013:FF:A0::1\\
2005:2013:FF:A30::/64 next Hop 2005:2013:FF:A0::1\\
2005:2013:FF:A40::/64 next Hop 2005:2013:FF:A0::1

\subsection{NAT}
Network Address Translation wird für IPv4 verwendet um den internen Clients Zugriff ins Internet zu gewähren und um den Webserver in der DMZ vom Internet aus zugänglich zu machen. Für den Internetzugriff der Clients wird ein Port Address Translation (PAT) konfiguriert, damit nur eine Public IP-Adresse verwendet werden muss. Für den Webserver wird ein statisches NAT mit einer zusätzlichen Public IP-Adresse konfiguriert.\\

Webserver: statisches NAT interne IP: 172.16.0.11 - öffentliche IP: 209.165.50.2\\
Interne Hosts: dynamisches NAT overload: interner Range: 10.0.0.0 255.255.0.0 - öffentliche IP 209.165.50.1 (Outside IF IP der Firewall)

\subsection{VTP}
\subsection{Spanning-Tree}
\subsection{VPN IPsec Remote Access}
\subsection{Serverkonzept}
!!!!Create Latex Table!!!!\\
Name					OS					IP			Gateway		Services\\
WOSMGR1LANSRV			Windows Server 2008 R2		10.0.10.21		10.0.10.1		AD / DNS / DHCP / Fileserver\\
WOSMGR1LANAdmin		Windows 7				10.0.20.21		10.0.20.1\\
WOSMGR1LANEntwicklung		Windows 7				10.0.30.21		10.0.30.1\\
WOSMGR1LANVerkauf		Windows 7				10.0.40.21		10.0.40.1\\
WOSMGR1DMZSRV			Windows Server 2008 R2		172.16.0.21		172.16.0.1		HTTP / HTTPS / FTP\\
WOSMGR1INETSRV			Windows Server 2008 R2		209.165.50.21	209.165.50.1	HTTP / HTTPS / FTP\\
WOSMGR1INETPC			Windows 7				209.165.50.22	209.165.50.1\\

\section{Sicherheit}
\subsection{Konzept}
Um die Sicherheit unseres Netzes zu gewähtleisten, haben wir uns entschieden verschiedene Sicherheitsstufen zu definieren. Dabei verfolgen wir eine High Security Strategie. Die höchste Sicherheitsstufe 'Stufe 1' gilt für die normalen User. Die zweite Sicherheitsstufe 'Stufe 2' gilt für die Server. Die dritte Sicherheitsstufe 'Stufe 3' gilt für die Administratoren.\\
Bei der Sicherheitsstufe Stufe 1 wird nur das nötigste zugelassen und alles andere blockiert. Die User dürfen über Ports 80 und 443 im Internet surfen, sowie FTP Verbindungen über Port 21 und 22 öffnen. Zudem werden eingehende DHCP Antworten über den Port UDP 68 zugelassen.\\
Bei der Sicherheitsstufe Stufe 2 wird alles zugelassen, was die Server benötigen. Dabei wird aus den VLANs 20, 30 und 40 alles zugelassen. Aus der DMZ wird nur der Port 389 für LDAP zugelassen.\\
Bei der Sicherheitsstufe Stufe 3 wird zusätzlich zu den in Stufe 1 zugelassenen Ports noch der Port 22 im internen Netz und in die DMZ zur Verwaltung der Netzwerkgeräte zugelassen. Zudem ist ist Internet für die Administratoren alles offen.\\
Die definierten Sicherheitsstufen wurden mithilfe verschiedener ACL's umgesetzt. Die definierten Regeln (Auflistung oben nicht abschliessend) der ACL's sind im folgenden Kapitel ersichtlich.\\
\\
Die ACL's werden möglichst nahe an der Quelle angewendet. Somit sind alle ACL's welche den Zugriff der verschiedenen internen VLAN's in irgend ein anderes Netz regeln auf dem Core Switch auf den Interfaces in Richtung 'in' angewendet. Alle ACL's die den Zugriff in die DMZ, rsp. von der DMZ in ein anderes Netz regeln auf der ASA angewendet. Alle ACL's die den eingehenden Traffic aus dem Internet regeln sind ebenfalls auf der ASA angewendet.\\
\\
Mit einer Stateful Firewall ist ein höherer Konfigurationsaufwand verbunden, aber gleichzeitig auch eine höhere Sicherheit. Da wir eine High Security Strategie verfolgen, ist die Stateful Variante besser geeignet für unsere Zwecke.\\
\subsection{Firewall}
ACL's!!

\section{Bedrohungsmodel}
\subsection{TCP DoS (Syn-Flooding)}
\subsubsection{Bedrohung}
Ein Angreifer sendet eine Broadcast Anfrage
\subsubsection{Gegenmassnahme}

\subsection{ICMP ‘smurf attack’: Denial of Service}
\subsubsection{Bedrohung}
Ein Angreifer sendet ein ICMP Packet mit einer Echo-Anfrage an eine oder mehrere Broadcasts und verwendet als Absenderadresse die IP Adresse des Servers (Opfer). Die Broadcastanfrage wird an alle Hosts in betroffenen Netz weitergeleitet. Die Hosts senden daraufhin ein die Echo-Antwort an den Server (Opfer). Der Server empfängt nun so viele Echo Antworten dass der Server nicht mehr reagiert und abstürtzt.
\subsubsection{Gegenmassnahme}
Um diese Attacke abzuwehren, kann ICMP blockiert werden. So ist sichergestellt, dass keine Echo Antworten den Server erreichen.

\subsection{Viren / Würmer / Trojaner}
\subsubsection{Bedrohung}
Programme, welche vertrauliche Infomrationen stehlen, Schaden auf den Hosts anrichten oder die Kontrolle über einen Host übernehmen und ihn für eigene Zwecke einsetzen. Zudem können diese Programme zum Beispiel als SMTP Relay fungieren und SPAM Nachrichten versenden, wodurch die Public IP auf einer Blackliste gelistet werden kann.
\subsubsection{Gegenmassnahme}
Um sich gegen Viren, Würmer und Trojaner zu schützen, muss ein Anti-Virenprogramm auf jedem Host installiert werden.

\subsection{DNS Cache poisoning}
\subsubsection{Bedrohung}
\subsubsection{Gegenmassnahme}

\subsection{Phishing}
\subsubsection{Bedrohung}
\subsubsection{Gegenmassnahme}

\subsection{MAC flooding}
\subsubsection{Bedrohung}
\subsubsection{Gegenmassnahme}

\subsection{ARP spoofing}
\subsubsection{Bedrohung}
\subsubsection{Gegenmassnahme}

\subsection{DHCP}
\subsubsection{Bedrohung}
Eine Person mit Zugriff auf ein Netzwerkkabel im internen Netz verbindet einen zusätzlichen, nicht autorisierten DHCP Server. Wenn der zusätzliche DHCP Sever schnellere Antwortzeiten hat als der offizielle DHCP Server, erhalten die Clients nun eine IP des nicht autorisierten DHCP Server, wodurch diese nicht mehr auf die interne Infrastruktur zugreiffen können.
\subsubsection{Gegenmassnahme}
Um dies zu verhindern, kann der Port 68 für DHCP Antworten blockiert werden (ausser vom offiziellen DHCP Server). Dadurch ist sichergestellt, dass kein zusätzlicher DHCP Server IP Adressen im interne Netz verteilen kann.

\subsection{Überblick}
Hier noch einmal ein Überblick der beschriebenen Bedrohungen inkl. Priorisierung und Markierung, gegen welche wir uns schützen:
!!!!Create Latex Table!!!!\\
Ranking	Eintrittswahrscheinlichkeit		Schweregrad		Bedrohung					Schutz umgesetzt\\
1		hoch					hoch			ICMP ‘smurf attack’: Denial of Service	ja\\
2		hoch					mittel			Viren / Würmer / Trojaner			nein\\
3		mittel					hoch			TCP DoS (Syn-Flooding)			ja\\
4		mittel					hoch			DNS Cache poisoning			nein\\
5		hoch					niedrig		Phishing					nein\\
6		niedrig				hoch			DHCP						ja\\
7		niedrig				mittel			MAC flooding					nein\\
8		niedrig				mittel			ARP spoofing				nein\\
\end{document}